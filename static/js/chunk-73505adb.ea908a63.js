(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73505adb"],{"0538":function(t,e,r){"use strict";var o=r("1c0b"),n=r("861d"),a=[].slice,i={},l=function(t,e,r){if(!(e in i)){for(var o=[],n=0;n<e;n++)o[n]="a["+n+"]";i[e]=Function("C,a","return new C("+o.join(",")+")")}return i[e](t,r)};t.exports=Function.bind||function(t){var e=o(this),r=a.call(arguments,1),i=function(){var o=r.concat(a.call(arguments));return this instanceof i?l(e,o.length,o):e.apply(t,o)};return n(e.prototype)&&(i.prototype=e.prototype),i}},"131a":function(t,e,r){var o=r("23e7"),n=r("d2bb");o({target:"Object",stat:!0},{setPrototypeOf:n})},3410:function(t,e,r){var o=r("23e7"),n=r("d039"),a=r("7b0b"),i=r("e163"),l=r("e177"),s=n((function(){i(1)}));o({target:"Object",stat:!0,forced:s,sham:!l},{getPrototypeOf:function(t){return i(a(t))}})},4458:function(t,e,r){},"4ae1":function(t,e,r){var o=r("23e7"),n=r("d066"),a=r("1c0b"),i=r("825a"),l=r("861d"),s=r("7c73"),c=r("0538"),u=r("d039"),d=n("Reflect","construct"),p=u((function(){function t(){}return!(d((function(){}),[],t)instanceof t)})),m=!u((function(){d((function(){}))})),f=p||m;o({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(t,e){a(t),i(e);var r=arguments.length<3?t:a(arguments[2]);if(m&&!p)return d(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var o=[null];return o.push.apply(o,e),new(c.apply(t,o))}var n=r.prototype,u=s(l(n)?n:Object.prototype),f=Function.apply.call(t,u,e);return l(f)?f:u}})},6507:function(t,e,r){"use strict";r("4458")},"7db0":function(t,e,r){"use strict";var o=r("23e7"),n=r("b727").find,a=r("44d2"),i=r("ae40"),l="find",s=!0,c=i(l);l in[]&&Array(1)[l]((function(){s=!1})),o({target:"Array",proto:!0,forced:s||!c},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a(l)},d8c9:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"form",attrs:{model:t.form,"label-position":"top",rules:t.orderRules,"label-suffix":":"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{sm:6}},[r("el-form-item",{attrs:{label:t.$t("order.form.customer"),prop:"customer"}},[r("el-select",{attrs:{filterable:"","prefix-icon":"el-icon-user-solid",placeholder:t.$t("common.selectLabel")+t.$t("order.form.customer")},on:{change:t.handleChangeCustomer},model:{value:t.currentRecord.customer_id,callback:function(e){t.$set(t.currentRecord,"customer_id",e)},expression:"currentRecord.customer_id"}},t._l(t.initialData.customers,(function(t){return r("el-option",{key:t.client_id,attrs:{label:t.clientname,value:t.client_id}})})),1)],1)],1),r("el-col",{attrs:{sm:6}},[r("el-form-item",[r("el-button",{staticStyle:{"margin-top":"45px"},attrs:{type:"primary"},on:{click:t.onAddCustomer}},[r("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("order.form.btnAddCustomer"))+" ")])],1)],1),r("el-col",{attrs:{sm:4}},[r("el-form-item",{attrs:{label:t.$t("order.form.date")}},[r("span",[t._v(t._s(t.currentRecord.date))])])],1),r("el-col",{attrs:{sm:4}},[r("el-form-item",{attrs:{label:t.$t("order.form.number")}},[r("span",[t._v(t._s(t.currentRecord.number))])])],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{sm:8}},[r("el-form-item",{attrs:{label:t.$t("order.form.salesPerson"),prop:"contactPerson"}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("common.selectLabel")+t.$t("order.form.salesPerson")},model:{value:t.currentRecord.salesperson_id,callback:function(e){t.$set(t.currentRecord,"salesperson_id",e)},expression:"currentRecord.salesperson_id"}},t._l(t.initialData.contactPersons,(function(t){return r("el-option",{key:t.contact_id,attrs:{label:t.firstname+","+t.lastname,value:t.contact_id}})})),1)],1)],1),r("el-col",{attrs:{sm:16}},[r("el-form-item",{attrs:{label:t.$t("order.form.term")}},[r("span",[t._v(t._s(t.termLabel))])])],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.note")}},[r("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:t.currentRecord.note,callback:function(e){t.$set(t.currentRecord,"note",e)},expression:"currentRecord.note"}})],1)],1),r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.fulfillNote")}},[r("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:t.currentRecord.fulfillmentnote,callback:function(e){t.$set(t.currentRecord,"fulfillmentnote",e)},expression:"currentRecord.fulfillmentnote"}})],1)],1),r("el-col",{attrs:{sm:4,xs:12}},[r("el-form-item",{attrs:{label:t.$t("order.form.orderDiscount")}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("common.selectLabel")+t.$t("order.form.customer")},on:{change:t.handleDiscountChange},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}},t._l(t.initialData.discounts,(function(t){return r("el-option",{key:t.promoid,attrs:{label:t.name,value:t.promoid}})})),1)],1)],1),r("el-col",{attrs:{sm:4,xs:12}},[r("el-form-item",{attrs:{label:t.$t("order.form.bTax")}},[r("el-checkbox",{on:{change:t.handleTaxAllow},model:{value:t.currentRecord.tax_allow,callback:function(e){t.$set(t.currentRecord,"tax_allow",e)},expression:"currentRecord.tax_allow"}},[t._v(t._s(""))])],1)],1)],1)],1),r("el-form",{ref:"formRow",attrs:{rules:t.rowRules,model:t.currentRow,"label-position":"top"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{sm:11,xs:24}},[r("label",[t._v(t._s(t.$t("order.form.selectedInventoryBalance.qty")))]),r("label",[t._v(t._s(t.selectedBalance.qty))]),r("label",[t._v(t._s(t.$t("order.form.selectedInventoryBalance.weight")))]),r("label",[t._v(t._s(t.selectedBalance.weight))]),r("el-row",[r("el-col",{attrs:{sm:12,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.strain"),prop:"strain"}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("common.selectLabel")+t.$t("order.form.strain")},on:{change:t.handleInventoryChange},model:{value:t.currentRow.strain,callback:function(e){t.$set(t.currentRow,"strain",e)},expression:"currentRow.strain"}},t._l(t.initialData.strains,(function(t){return r("el-option",{key:t.itemname_id,attrs:{label:t.strain,value:t.itemname_id}})})),1)],1)],1),r("el-col",{attrs:{sm:12,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.pType"),prop:"p_type"}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("common.selectLabel")+t.$t("order.form.pType")},on:{change:t.handleInventoryChange},model:{value:t.currentRow.p_type,callback:function(e){t.$set(t.currentRow,"p_type",e)},expression:"currentRow.p_type"}},t._l(t.initialData.pTypes,(function(t){return r("el-option",{key:t.producttype_id,attrs:{label:t.producttype,value:t.producttype_id}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.qty"),prop:"qty"}},[r("el-input-number",{attrs:{"controls-position":"right",min:1,"inline-message":t.$t("order.form.row.qty")},on:{change:t.handleInventoryChange},model:{value:t.currentRow.qty,callback:function(e){t.$set(t.currentRow,"qty",e)},expression:"currentRow.qty"}})],1)],1),r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.unit")}},[r("el-input",{attrs:{readonly:!0},model:{value:t.currentRow.units,callback:function(e){t.$set(t.currentRow,"units",e)},expression:"currentRow.units"}})],1)],1),r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.basePrice"),prop:"unit_price"}},[r("el-input-number",{attrs:{min:0,"controls-position":"right"},on:{change:t.handleUnitPriceChange},model:{value:t.currentRow.unit_price,callback:function(e){t.$set(t.currentRow,"unit_price",e)},expression:"currentRow.unit_price"}})],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.subTotal")}},[r("el-input",{attrs:{readonly:!0},model:{value:t.currentRow.st,callback:function(e){t.$set(t.currentRow,"st",e)},expression:"currentRow.st"}})],1)],1),r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.cpu")}},[r("el-input",{attrs:{readonly:!0},model:{value:t.currentRow.cpu,callback:function(e){t.$set(t.currentRow,"cpu",e)},expression:"currentRow.cpu"}})],1)],1),r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.discount")}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("common.selectLabel")+t.$t("order.form.customer")},on:{change:t.handleRowDiscountChange},model:{value:t.currentRow.discount_id,callback:function(e){t.$set(t.currentRow,"discount_id",e)},expression:"currentRow.discount_id"}},t._l(t.initialData.discounts,(function(t){return r("el-option",{key:t.promoid,attrs:{label:t.name,value:t.promoid}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.discountResult")}},[r("el-input",{attrs:{readonly:!0},model:{value:t.currentRow.discount,callback:function(e){t.$set(t.currentRow,"discount",e)},expression:"currentRow.discount"}})],1)],1),r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.eDiscount")}},[r("el-input",{attrs:{readonly:!0},model:{value:t.currentRow.e_discount,callback:function(e){t.$set(t.currentRow,"e_discount",e)},expression:"currentRow.e_discount"}})],1)],1),r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.extended")}},[r("el-input",{attrs:{readonly:!0},model:{value:t.currentRow.extended,callback:function(e){t.$set(t.currentRow,"extended",e)},expression:"currentRow.extended"}})],1)],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.tax")}},[r("el-input-number",{attrs:{"controls-position":"right",disabled:t.currentRow.bTax},on:{change:t.handleUnitPriceChange},model:{value:t.currentRow.tax,callback:function(e){t.$set(t.currentRow,"tax",e)},expression:"currentRow.tax"}})],1)],1),r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.note")}},[r("el-input",{model:{value:t.currentRow.tax_note,callback:function(e){t.$set(t.currentRow,"tax_note",e)},expression:"currentRow.tax_note"}})],1)],1),r("el-col",{attrs:{sm:8,xs:24}},[r("el-form-item",{attrs:{label:t.$t("order.form.row.total")}},[r("el-input",{attrs:{readonly:!0},model:{value:t.currentRow.ap,callback:function(e){t.$set(t.currentRow,"ap",e)},expression:"currentRow.ap"}})],1)],1)],1),r("el-button",{attrs:{type:"primary"},on:{click:t.handleAddRow}},[r("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("order.form.row.btnAdd"))+" ")])],1),r("el-col",{attrs:{sm:13,xs:24}},[r("el-table",{attrs:{data:t.initialData.inventoryStatus,stripe:"",border:"",fit:"","highlight-current-row":"",height:"470"}},[r("el-table-column",{attrs:{align:"center",sortable:"",label:t.$t("order.form.strain"),width:"170",prop:"strain"}}),r("el-table-column",{attrs:{align:"center",sortable:"",label:t.$t("order.form.pType"),prop:"p_type"}}),r("el-table-column",{attrs:{align:"center",sortable:"",label:t.$t("order.form.qty"),width:"50",prop:"qty"}}),r("el-table-column",{attrs:{align:"center",sortable:"",label:t.$t("order.form.weight"),width:"100",prop:"weight"}})],1)],1)],1)],1),r("el-table",{staticStyle:{"margin-top":"30px"},attrs:{data:t.insertedData,stripe:"",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.no"),width:"50",prop:"key"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.description"),prop:"description"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.qty"),width:"50",prop:"qty"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.unit"),width:"100",prop:"units"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.basePrice"),width:"100",prop:"unit_price"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.subTotal"),width:"100",prop:"st"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.cpu"),width:"100",prop:"cpu"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.discountResult"),width:"100",prop:"discount"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.discountType"),width:"100",prop:"discountLabel"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.eDiscount"),width:"100",prop:"e_discount"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.extended"),width:"100",prop:"extended"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.lineNote"),width:"100",prop:"tax_note"}}),r("el-table-column",{attrs:{align:"center",label:t.$t("order.form.row.total"),width:"100",prop:"ap"}}),r("el-table-column",{attrs:{align:"center",label:"Actions",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return t.handleEditRow(e.row.key)}}},[t._v(" "+t._s(t.$t("customer.edit"))+" ")])]}}])}),r("el-table-column",{attrs:{align:"center",label:"Actions",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return t.handleRemoveRow(e.row.key)}}},[t._v(" "+t._s(t.$t("customer.edit"))+" ")])]}}])})],1),r("el-table",{staticStyle:{width:"50%","margin-top":"30px"},attrs:{data:t.orderTotalTableData,border:"","show-header":!1}},[r("el-table-column",{attrs:{prop:"name","class-name":"bold-td"}}),r("el-table-column",{attrs:{prop:"value",width:"180"}})],1),r("el-button",{staticStyle:{"margin-top":"45px"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" "+t._s(t.$t("order.form.btnSubmit"))+" ")])],1)},n=[],a=(r("a4d3"),r("e01a"),r("4de4"),r("7db0"),r("4160"),r("b0c0"),r("b680"),r("159b"),r("5530")),i=(r("96cf"),r("1da1")),l=r("de0d"),s=new l["a"],c={name:"OrderForm",data:function(){var t=this,e=function(e,r,o){t.currentRow.qty>t.selectedBalance.qty&&o(new Error("Please Enter Validate Qty")),setTimeout((function(){t.currentRow.qty>0&&t.$refs.formRow.validateField("qty"),o()}),1e3)},r=function(e,r,o){t.currentRow.unit_price<=0&&o(new Error("Please Enter Validate Price")),setTimeout((function(){t.currentRow.unit_price>0&&t.$refs.formRow.validateField("unit_price"),o()}),1e3)},o=function(e,r,o){null===t.currentRow.strain&&o(new Error("Please Enter Strain")),setTimeout((function(){null!==t.currentRow.strain&&t.$refs.formRow.validateField("strain"),o()}),1e3)},n=function(e,r,o){null===t.currentRow.p_type&&o(new Error("Please Select Product Type")),setTimeout((function(){null!==t.currentRow.p_type&&t.$refs.formRow.validateField("p_type"),o()}),1e3)},a=function(e,r,o){null===t.currentRecord.customer_id&&o(new Error("Please Select Customer")),setTimeout((function(){null!==t.currentRow.p_type&&t.$refs.form.validateField("customer"),o()}),1e3)},i=function(e,r,o){null===t.currentRecord.customer_id&&o(new Error("Please Select SalesPerson")),setTimeout((function(){null!==t.currentRow.p_type&&t.$refs.form.validateField("contactPerson"),o()}),1e3)};return{form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},initialData:{customers:[{id:"",name:""}],contactPersons:[{contact_id:"",firstname:"",lastname:""}],inventoryStatus:[],discounts:[{promoid:"",name:"a",datecreated:""}]},selectedBalance:{qty:0,weight:0,bp:0,taxE:0},inventoryStatus:[{strain:"",p_type:"",qty:"",weight:""}],currentRecord:{number:"",customer_id:null,date:"",note:"",fulfillmentnote:"",distuributor_id:0,total:"",tax_allow:!1,items:"",term_id:"",salesperson_id:null,id:"",mode:"store",shipping_method:{reference:"3440",ok:!0},creditNoteForDeduct:0},currentRow:{strain:null,p_type:null,qty:1,units:1,unit_price:0,discount:0,e_discount:0,discount_id:null,discount_type:0,discountLabel:"",tax:0,bTax:!1,tax_note:"",cpu:0,st:0,extended:0,ap:0},insertedData:[],total:0,discount:null,termLabel:"",orderDate:"",avaliableCreditNote:0,query:{page:1,limit:10,keyword:""},rowRules:{qty:[{validator:e,trigger:"blur"}],unit_price:[{validator:r,trigger:"blur"}],strain:[{validator:o,trigger:"blur"}],p_type:[{validator:n,trigger:"blur"}]},orderRules:{customer:[{validator:a,trigger:"blur"}],contactPerson:[{validator:i,trigger:"blur"}]},orderTotal:{st:0,discount:0,e_discount:0,pr:0,extended:0,tax:0,ap:0},orderTotalTableData:[{name:"Total Base Price:",value:"0"},{name:"Discount Amount:",value:"0"},{name:"Extra Discount Amount:",value:"0"},{name:"Promotion Value:",value:"0"},{name:"Sub Total:",value:"0"},{name:"CA Excise Tax Based On Total Base Price @ 27%:",value:"0"},{name:"Total Due:",value:"0"}]}},created:function(){this.getInitData()},methods:{onSubmit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$refs["form"].validate((function(e){if(0===t.insertedData.length&&(e=!1),!e)return t.$alert("You need to fill All field to save the Invoice","Warning",{confirmButtonText:"OK"}),!1;t.$confirm("Are You going to save the Sales order?","Are You Sure",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"info",center:!0}).then((function(){var e=Object(a["a"])({},t.currentRecord);e.total=t.orderTotal.ap,e.tax_allow=e.tax_allow?1:0,e.items=t.insertedData,e.location=1;var r=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s.save(e).then((function(e){r.close(),t.$confirm("How would you like to proceed?","Options",{confirmButtonText:"Go to Pending Approval List",cancelButtonText:"Create New Order",type:"info",center:!0}).then((function(){console.log("pending order")})).catch((function(t){console.log("new order")}))})).catch((function(e){r.close(),t.$message({type:"danger",message:"Failed to Save Order"})}))})).catch((function(){}))}));case 1:case"end":return e.stop()}}),e)})))()},onCancel:function(){this.$message({message:"cancel!",type:"warning"})},getInitData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.next=3,s.getFormInitial();case 3:o=e.sent,t.initialData=Object(a["a"])(Object(a["a"])({},t.initialData),o),t.total=t.initialData.inventoryStatus.length,t.currentRecord.date=t.initialData.orderDate,t.currentRecord.number=t.initialData.soNumber,r.close();case 9:case"end":return e.stop()}}),e)})))()},handleUnitPriceChange:function(){this.currentRow=this.updateCurrentRowValue(this.currentRow)},handleInventoryChange:function(){var t=this;if(null===this.currentRow.strain&&null===this.currentRow.p_type)return!1;var e=!1;this.initialData.inventoryStatus.forEach((function(r){r.strain_id===t.currentRow.strain&&r.p_type_id===t.currentRow.p_type&&(t.selectedBalance.qty=r.qty,t.selectedBalance.weight=r.weight,t.currentRow.unit_price=r.bp,t.currentRow.bTax=1===r.taxE,e=!0)})),e||(this.selectedBalance.qty=0,this.selectedBalance.weight=0,this.currentRow.unit_price=0,this.currentRow.bTax=!1),this.initialData.pTypes.forEach((function(e){e.producttype_id===t.currentRow.p_type&&(t.currentRow.units=e.units)})),this.currentRow=this.updateCurrentRowValue(this.currentRow)},handleDiscountChange:function(){var t=this;this.currentRow.discount_id=this.discount,this.insertedData.forEach((function(e,r){e.discount_id=t.discount,t.insertedData[r]=t.updateCurrentRowValue(e)})),this.currentRow=this.updateCurrentRowValue(this.currentRow),this.figureTotal()},handleRowDiscountChange:function(){this.currentRow=this.updateCurrentRowValue(this.currentRow)},handleAddRow:function(){var t=this;this.$refs["formRow"].validate((function(e){if(e){var r=Object(a["a"])({},t.currentRow),o=!1;if(t.insertedData.forEach((function(t){t.strain===r.strain&&t.p_type===r.p_type&&(o=!0)})),o)return alert("Duplicated Item"),!1;var n=t.initialData.strains.find((function(e){return e.itemname_id===t.currentRow.strain})),i=t.initialData.pTypes.find((function(e){return e.producttype_id===t.currentRow.p_type})),l=t.initialData.discounts.find((function(e){return e.promoid===t.currentRow.discount_id}));r.description=n.strain+","+i.producttype,void 0!==l&&(r.discountLabel=l.name),r.key=t.insertedData.length+1,r.discount_id=null==r.discount_id?0:r.discount_id,t.insertedData.push(r),t.resetCurrentRow(),t.figureTotal()}}))},updateCurrentRowValue:function(t){var e=null;return this.initialData.discounts.forEach((function(r){r.promoid===t.discount_id&&(e=r)})),t.cpu=t.unit_price*parseFloat(t.qty/parseFloat(t.units)),t.st=t.unit_price*t.qty,t.discount=null!=e?t.st*e.multiplier/100:0,t.e_discount=parseFloat(t.e_discount),t.bTax&&(t.tax=0),t.extended=t.st-t.discount-t.e_discount,t.ap=t.extended+t.tax,t.st=t.st.toFixed(2),t.cpu=t.cpu.toFixed(2),t.discount=t.discount.toFixed(2),t.e_discount=t.e_discount.toFixed(2),t.tax=t.tax.toFixed(2),t.extended=t.extended.toFixed(2),t.ap=t.ap.toFixed(2),this.$refs["formRow"].validate(),t},handleChangeCustomer:function(){var t=this,e=this.initialData.customers.find((function(e){return e.client_id===t.currentRecord.customer_id}));this.currentRecord.salesperson_id=null,this.termLabel="",this.currentRecord.term_id=0,this.initialData.contactPersons.forEach((function(r){r.contact_id===e.salesrep&&(t.currentRecord.salesperson_id=e.salesrep,t.termLabel=e.rTerm.name,t.currentRecord.term_id=e.rTerm.id)}))},handleEditRow:function(t){console.log(t),this.currentRow=this.insertedData[t-1],this.handleRemoveRow(t)},handleRemoveRow:function(t){this.insertedData=this.insertedData.filter((function(e){return e.key!==t})),this.figureTotal()},handleTaxAllow:function(){this.figureTotal()},onAddCustomer:function(){},figureTotal:function(){var t=this;this.resetOrderTotal();var e=0;this.insertedData.forEach((function(r){t.orderTotal.st+=parseFloat(r.st),r.bTax||(e+=parseFloat(r.st)),t.orderTotal.discount+=parseFloat(r.discount),t.orderTotal.e_discount+=parseFloat(r.e_discount),t.orderTotal.extended+=parseFloat(r.extended),t.orderTotal.ap+=parseFloat(r.ap)})),this.orderTotal.pr=this.orderTotal.st-e,this.currentRecord.tax_allow||(this.orderTotal.tax=.27*(this.orderTotal.st-this.orderTotal.discount)),this.orderTotal.ap+=this.orderTotal.tax,this.orderTotal.st=parseFloat(this.orderTotal.st),this.orderTotal.discount=parseFloat(this.orderTotal.discount),this.orderTotal.e_discount=parseFloat(this.orderTotal.e_discount),this.orderTotal.pr=parseFloat(this.orderTotal.pr),this.orderTotal.extended=parseFloat(this.orderTotal.extended),this.orderTotal.tax=parseFloat(this.orderTotal.tax),this.orderTotal.ap=parseFloat(this.orderTotal.ap),this.orderTotal.st=this.orderTotal.st.toFixed(2),this.orderTotal.discount=this.orderTotal.discount.toFixed(2),this.orderTotal.e_discount=this.orderTotal.e_discount.toFixed(2),this.orderTotal.pr=this.orderTotal.pr.toFixed(2),this.orderTotal.extended=this.orderTotal.extended.toFixed(2),this.orderTotal.tax=this.orderTotal.tax.toFixed(2),this.orderTotal.ap=this.orderTotal.ap.toFixed(2),this.updateOrderTotalTableData()},resetCurrentRow:function(){this.currentRow.strain=null,this.currentRow.p_type=null,this.currentRow.qty=1,this.currentRow.units=1,this.currentRow.unit_price=0,this.currentRow.discount=0,this.currentRow.e_discount=0,this.currentRow.discount_id=null,this.currentRow.discount_type=0,this.currentRow.tax=0,this.currentRow.bTax=!1,this.currentRow.tax_note="",this.currentRow.cpu=0,this.currentRow.st=0,this.currentRow.extended=0,this.currentRow.ap=0,this.currentRow.description="",this.currentRow.discountLabel="",this.selectedBalance.qty=0,this.selectedBalance.weight=0},resetOrderTotal:function(){this.orderTotal.st=0,this.orderTotal.discount=0,this.orderTotal.e_discount=0,this.orderTotal.pr=0,this.orderTotal.extended=0,this.orderTotal.tax=0,this.orderTotal.ap=0,this.updateOrderTotalTableData()},updateOrderTotalTableData:function(){this.orderTotalTableData=[],this.orderTotalTableData.push({name:"Total Base Price:",value:this.orderTotal.st}),this.orderTotalTableData.push({name:"Discount Amount:",value:this.orderTotal.discount}),this.orderTotalTableData.push({name:"Extra Discount Amount:",value:this.orderTotal.e_discount}),this.orderTotalTableData.push({name:"Promotion Value:",value:this.orderTotal.pr}),this.orderTotalTableData.push({name:"Sub Total:",value:this.orderTotal.extended}),this.orderTotalTableData.push({name:"CA Excise Tax Based On Total Base Price @ 27%:",value:this.orderTotal.tax}),this.orderTotalTableData.push({name:"Total Due:",value:this.orderTotal.ap})}}},u=c,d=(r("6507"),r("2877")),p=Object(d["a"])(u,o,n,!1,null,null,null);e["default"]=p.exports},de0d:function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}r.d(e,"a",(function(){return b}));r("131a");function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function l(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}r("4ae1"),r("3410");function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}r("d3b7"),r("25f0");function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var u=r("53ca");function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){return!e||"object"!==Object(u["a"])(e)&&"function"!==typeof e?d(t):e}function m(t){var e=c();return function(){var r,o=s(t);if(e){var n=s(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return p(this,r)}}var f=r("b775"),h=function(){function t(e){o(this,t),this.uri=e}return a(t,[{key:"list",value:function(t){return Object(f["a"])({url:"/"+this.uri,method:"get",params:t})}},{key:"get",value:function(t){return Object(f["a"])({url:"/"+this.uri+"/"+t,method:"get"})}},{key:"store",value:function(t){return Object(f["a"])({url:"/"+this.uri,method:"post",data:t})}},{key:"update",value:function(t,e){return Object(f["a"])({url:"/"+this.uri+"/"+t,method:"put",data:e})}},{key:"destroy",value:function(t){return Object(f["a"])({url:"/"+this.uri+"/"+t,method:"delete"})}}]),t}(),b=function(t){l(r,t);var e=m(r);function r(){return o(this,r),e.call(this,"wborder")}return a(r,[{key:"getFormInitial",value:function(){return Object(f["a"])({url:"/"+this.uri+"/form/get_init_data",method:"get"})}},{key:"save",value:function(t){return Object(f["a"])({url:"/"+this.uri+"/form/store",method:"post",data:t})}},{key:"archive0",value:function(t){return Object(f["a"])({url:"/"+this.uri+"/archive0",method:"get",params:t})}},{key:"archive1",value:function(t){return Object(f["a"])({url:"/"+this.uri+"/archive1",method:"get",params:t})}},{key:"getPendingDetail",value:function(t){return Object(f["a"])({url:"/"+this.uri+"/archive0/customer-detail?id="+t,method:"get"})}},{key:"getOrderDetail",value:function(t){return Object(f["a"])({url:"/"+this.uri+"/detail/"+t,method:"get"})}}]),r}(h)}}]);